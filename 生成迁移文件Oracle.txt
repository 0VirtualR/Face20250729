完全清理迁移历史：

bash
Remove-Migration -Force  # 强制移除所有迁移
rm -r Migrations/       # 删除整个迁移文件夹
重新生成迁移：

bash
Add-Migration InitialCreate -OutputDir "Migrations/Oracle"
手动验证SQL：
检查生成的Up()方法，确保：

没有不兼容的注解

所有表/列名使用大写

序列引用格式正确

执行更新：

bash
Update-Database -Verbose  # 查看实际执行的SQL


     //migrationBuilder.Sql("CREATE SEQUENCE TODO_SEQ START WITH 1 INCREMENT BY 1 NOCACHE");
migrationBuilder.CreateTable(
        name: "TODO",
        columns: table => new
        {
            ID = table.Column<int>(nullable: false)
                .Annotation("Oracle:ValueGenerationStrategy", OracleValueGenerationStrategy.SequenceHiLo)
                .Annotation("Oracle:HiLoSequenceName", "TODO_SEQ"), // 明确指定序列
            TITLE = table.Column<string>(maxLength: 100, nullable: false),
            CONTENT = table.Column<string>(maxLength: 100, nullable: false),
            STATUS = table.Column<int>(nullable: false),
            CREATEDATE = table.Column<DateTime>(nullable: false),
            UPDATEDATE = table.Column<DateTime>(nullable: false)
        },
        constraints: table => table.PrimaryKey("PK_TODO", x => x.ID));
}

/// <inheritdoc />
protected override void Down(MigrationBuilder migrationBuilder)
{
    //migrationBuilder.DropTable(                name: "TODO");
    migrationBuilder.DropTable(name: "TODO");
    migrationBuilder.Sql("DROP SEQUENCE TODO_SEQ"); // 手动添加
}



-- 1. 创建表空间（推荐用于生产环境）
CREATE TABLESPACE TODODATA
DATAFILE 'tododata01.dbf' SIZE 100M 
AUTOEXTEND ON NEXT 50M 
MAXSIZE UNLIMITED
EXTENT MANAGEMENT LOCAL 
SEGMENT SPACE MANAGEMENT AUTO;

-- 2. 创建应用程序用户
CREATE USER todo IDENTIFIED BY todo  -- 替换为强密码
DEFAULT TABLESPACE TODODATA
TEMPORARY TABLESPACE TEMP
QUOTA UNLIMITED ON TODODATA
ACCOUNT UNLOCK;

-- 3. 授予基本权限（EF Core必需）
GRANT CREATE SESSION TO todo;       -- 连接权限
GRANT CREATE TABLE TO todo;         -- 创建表
GRANT CREATE SEQUENCE TO todo;      -- 序列（自增ID必需）
GRANT CREATE PROCEDURE TO todo;     -- 存储过程
GRANT CREATE TRIGGER TO todo;       -- 触发器
GRANT CREATE VIEW TO todo;          -- 视图

-- 4. 授予对象操作权限（针对自身对象）
-- 注意：用户自动拥有自己对象的完整权限，只需授予修改和删除能力
GRANT ALTER ANY TABLE TO todo;      -- 修改表结构
GRANT DROP ANY TABLE TO todo;       -- 删除表（开发环境可用）

-- 5. 授予序列操作权限
GRANT SELECT ANY SEQUENCE TO todo;  -- 查询序列
GRANT ALTER ANY SEQUENCE TO todo;   -- 修改序列

-- 6. 授予表空间权限
GRANT UNLIMITED TABLESPACE TO todo; -- 使用表空间

commit;
